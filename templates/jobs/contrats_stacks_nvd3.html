<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="../../static/nvd3/nv.d3-1.1.15-beta.css" rel="stylesheet" type="text/css">
    <script src="../../static/d3/d3_3.4.9.min.js"></script>
    <script src="../../static/nvd3/nv.d3-1.1.15-beta.min.js"></script>
  </head>
  <body>
        <div id='chart' class='span4'>
            Camembert - juin 2014
            <svg style='height:500px;width:400px'> </svg>
        </div>
    <script type="text/javascript">
    d3.json('../static/json/contrats2_month.json', function(data) {
    nv.addGraph(function() {
    var chart = nv.models.stackedAreaChart()
                  .margin({right: 100})
                  .x(function(d) { return d[0] })   //We can modify the data accessor functions...
                  .y(function(d) { return d[1] })   //...in case your data is formatted differently.
                  .useInteractiveGuideline(true)    //Tooltips which show all data points. Very nice!
                  /*.rightAlignYAxis(true)      //Let's move the y-axis to the right side.*/
                  .transitionDuration(500)
                  .showControls(true)       //Allow user to choose 'Stacked', 'Stream', 'Expanded' mode.
                  .clipEdge(true);

    //Format x-axis labels with custom function.
    chart.xAxis
        .ticks(d3.time.months, 1)
        .tickFormat(function(d) { 
          return d3.time.format('%m/%y')(new Date(d)) 
    });

    chart.yAxis
        .tickFormat(d3.format(',.0f'));

    d3.select('#chart svg')
      .datum(data)
      .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
  });
})
    </script>
  </body>
</html>